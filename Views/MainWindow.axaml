<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:Lance.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1280" d:DesignHeight="720"
        x:Class="Lance.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/avalonia-logo.ico"
        Title="Lance">

    <Design.DataContext>
        <!-- This only sets the DataContext for the previewer in an IDE,
             to set the actual DataContext for runtime, set the DataContext property in code (look at App.axaml.cs) -->
        <vm:MainWindowViewModel/>
    </Design.DataContext>

    <Grid ShowGridLines="True" ColumnDefinitions="300, 400, *" RowDefinitions="100, *">
        <!-- LOGO -->
        <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center">
            <Image Source="../Assets/Images/lance.png" Width="70"></Image>
        </StackPanel>
        
        <!-- FILE SELECTION -->
        <StackPanel Grid.Row="1" Grid.Column="0">
            <ListBox Name="FileSelectionListBox" SelectionMode="Toggle">
                <ListBoxItem>POST_Request.json</ListBoxItem>
                <ListBoxItem>GET_Request.json</ListBoxItem>
                <ListBoxItem>PUT_Request.json</ListBoxItem>
            </ListBox>
        </StackPanel>
        
        <!-- GENERAL ACTIONS -->
        <Grid Grid.Row="0" Grid.Column="1" HorizontalAlignment="Center" ColumnDefinitions="150, *, 150">
            <Button Grid.Column="0" Content="Export" HorizontalAlignment="Left" VerticalAlignment="Center" />
            <Button Grid.Column="2" Content="Save" HorizontalAlignment="Right" VerticalAlignment="Center" />
        </Grid>
        
        <!-- HEADERS, AUTHORIZATION AND BODY -->
        <TabControl Grid.Row="1" Grid.Column="1">
            <TabItem Header="Headers" FontSize="15"><TextBlock>TODO: LOGIC TO ADD AND REMOVE HEADERS IN THE UI</TextBlock></TabItem>
            <TabItem Header="Authorization" Name="AuthorizationTabItem" FontSize="15">
                <StackPanel VerticalAlignment="Top" Margin="20">
                    <TextBlock Name="AuthorizationTextBlock" HorizontalAlignment="Center">Authorization Header:</TextBlock>
                    <ToggleSwitch Name="AuthorizationBearerToggleSwitch" HorizontalAlignment="Center">Bearer</ToggleSwitch>
                    <TextBox Name="AuthorizationTextBox" Watermark="Ex.: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzd..."></TextBox>
                </StackPanel>
            </TabItem>
            <TabItem Header="Body" FontSize="15">
                <Grid ColumnDefinitions="*" RowDefinitions="*">
                    <TextBox
                        Watermark="Text body content here"
                        TextWrapping="Wrap"
                        PastingFromClipboard="TextBox_OnPastingFromClipboard"
                        Text="{Binding Body}"
                        />
                </Grid>
            </TabItem>
        </TabControl>
        
        <!-- HTTP METHOD AND URI -->
        <Grid Grid.Row="0" Grid.Column="2" Margin="20" ColumnDefinitions="100, *, 100">
            <ComboBox Grid.Column="0"
                      SelectedIndex="{Binding SelectedMethodIndex}"
                      VerticalAlignment="Center"
                      HorizontalAlignment="Left"
                      Name="HttpMethodComboBox">
                <ComboBoxItem>GET</ComboBoxItem>
                <ComboBoxItem>POST</ComboBoxItem>
                <ComboBoxItem>PUT</ComboBoxItem>
                <ComboBoxItem>PATCH</ComboBoxItem>
                <ComboBoxItem>DELETE</ComboBoxItem>
                <ComboBoxItem>OPTIONS</ComboBoxItem>
            </ComboBox>
            <TextBox Grid.Column="1" 
                     Watermark="Insert your URL here" 
                     Margin="10"
                     MinWidth="300"
                     Name="UrlTextBox"
                     Text="{Binding Url}" 
                     KeyDown="UrlTextBox_OnKeyDown"/>
            <Button Grid.Column="2" 
                    MinWidth="100" 
                    Margin="10"
                    HorizontalContentAlignment="Center" 
                    HorizontalAlignment="Center"
                    Name="MakeRequestButton"
                    Command="{Binding MakeRequestCommand}">Go</Button>
        </Grid>
        
        <!-- RESPONSE -->
        <Grid 
            Grid.Row="1"
            Grid.Column="2" 
            ColumnDefinitions="*" 
            RowDefinitions="40, *" 
            Name="ResponsePanel" 
            IsVisible="{Binding RequestCompleted}">
            <Panel 
                Grid.Column="0" 
                Grid.Row="0" 
                Margin="10">
                <TextBlock HorizontalAlignment="Left" Text="{Binding FormattedRequestTime}" />
                <TextBlock
                    HorizontalAlignment="Right"
                    Background="PaleGreen" 
                    Foreground="Black" 
                    Text="{Binding FormattedStatusCode}"/>
            </Panel>
            <TabControl Grid.Row="1" Grid.Column="0">
                <TabItem Header="Response Content" FontSize="15">
                    <TextBox IsReadOnly="True"
                             Margin="15"
                             TextWrapping="Wrap"
                             Name="ResponseContentTextBox"
                             Text="{Binding ResponseContent}" />
                </TabItem>
                <TabItem Header="Response Headers" FontSize="15"></TabItem>
            </TabControl>

        </Grid>
    </Grid>

</Window>
